{"version":3,"file":"candles.js","sources":["../src/modules/graph.js","../src/candles.js"],"sourcesContent":["function Graph(range) {\r\n  this.range = {\r\n    x: {\r\n      min: range.x.min,\r\n      max: range.x.max,\r\n      range: range.x.max - range.x.min\r\n    },\r\n    y: {\r\n      min: range.y.min,\r\n      max: range.y.max,\r\n      range: range.y.max - range.y.min\r\n    }\r\n  };\r\n  this.scaleVolume = 0.25;\r\n};\r\n\r\nGraph.prototype = {\r\n  normY: function(y) {\r\n    return (y - this.range.y.min) / (this.range.y.range);\r\n  },\r\n\r\n  normX: function(x) {\r\n    return (x - this.range.x.min) / (this.range.x.range);\r\n  },\r\n\r\n  graphCandle: function(ctx, candle) {\r\n    var O = (1 - this.normY(candle.O)) * ctx.canvas.height,\r\n        C = (1 - this.normY(candle.C)) * ctx.canvas.height,\r\n        H = (1 - this.normY(candle.H)) * ctx.canvas.height,\r\n        L = (1 - this.normY(candle.L)) * ctx.canvas.height,\r\n        T = this.normX(candle.T) * ctx.canvas.width,\r\n        W = (candle.width / this.range.x.range) * ctx.canvas.width,\r\n        V = (candle.V) ? (1 - this.normY(candle.V) * this.scaleVolume) * ctx.canvas.height : false;\r\n\r\n    console.log(O, C, H, L, T, W, V);\r\n\r\n    ctx.beginPath()\r\n    ctx.moveTo(T, H);\r\n    ctx.lineTo(T, L);\r\n    ctx.stroke();\r\n    ctx.fillRect(T - W/2, O, W, C - O);\r\n    ctx.strokeRect(T - W/2, O, W, C - O);\r\n\r\n    if (V) {\r\n      ctx.fillRect(T - W/2, V, W, ctx.canvas.height - V)\r\n    }\r\n  },\r\n\r\n};\r\n\r\nexport { Graph };\r\n","import { Graph } from './modules/graph';\n\nvar Candles = function(params) {\n  if (typeof params === 'undefined') {\n    var params = {};\n  }\n\n  this.append = params.append || false;\n  this.width = params.width || 500;\n  this.height = params.height || 400;\n  this.increaseStroke = params.increaseStroke || 'black';\n  this.decreaseStroke = params.decreaseStroke || 'black';\n  this.volumeStroke = params.volumeStroke || 'grey';\n  this.increaseFill = params.increaseFill || 'white';\n  this.decreaseFill = params.decreaseFill || 'black';\n  this.volumeFill = params.volumeFill || 'grey';\n  this.range = {x: {min: 0, max: 100}, y: {min: 0, max: 100}};\n\n  if (params.xRange) {\n    this.range.x.min = params.xRange[0];\n    this.range.x.max = params.xRange[1];\n  }\n\n  if (params.yRange) {\n    this.range.y.min = params.yRange[0];\n    this.range.y.max = params.yRange[1];\n  }\n\n  this.init();\n};\n\nCandles.prototype = {\n  init: function() {\n    this.cvs = document.createElement('canvas');\n    this.cvs.id = 'candlesCanvas';\n    this.cvs.width = this.width;\n    this.cvs.height = this.height;\n    this.ctx = this.cvs.getContext('2d');\n\n    // graphing\n    this.graph = new Graph(this.range);\n\n    if (this.append) {\n      document.getElementById(this.append).appendChild(this.cvs);\n    } else {\n      document.body.appendChild(this.cvs);\n    }\n  },\n\n  test: function() {\n    this.graph.graphCandle(this.ctx, {\n        O: 50,\n        C: 30,\n        H: 55,\n        L: 20,\n        T: 50,\n        V: 25,\n        width: 5\n    });\n  },\n\n  graph: function(candle) {\n\n  },\n};\n"],"names":[],"mappings":"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"}