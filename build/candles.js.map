{"version":3,"file":"candles.js","sources":["../src/modules/graph.js","../src/candles.js"],"sourcesContent":["function Graph(params) {\r\n  this.style = {\r\n    increase: {\r\n      fill: params.increaseFill || 'white',\r\n      stroke: params.increaseStroke || 'black'\r\n    },\r\n    decrease: {\r\n      fill: params.decreaseFill || 'black',\r\n      stroke: params.decreaseStroke || 'black'\r\n    },\r\n    volume: {\r\n      fill: params.volumeFill || '#ddd',\r\n      stroke: params.volumeStroke || '#ccc'\r\n    }\r\n  };\r\n  this.range = {\r\n    x: {\r\n      min: 0,\r\n      max: 100,\r\n      range: 100\r\n    },\r\n    y: {\r\n      min: 0,\r\n      max: 100,\r\n      range: 100\r\n    },\r\n    v: {\r\n      min: 0,\r\n      max: 100,\r\n      range: 100\r\n    }\r\n  };\r\n  if (params.xRange) {\r\n    this.range.x.min = params.xRange[0];\r\n    this.range.x.max = params.xRange[1];\r\n    this.range.x.range = this.range.x.max - this.range.x.min;\r\n  }\r\n  if (params.yRange) {\r\n    this.range.y.min = params.yRange[0];\r\n    this.range.y.max = params.yRange[1];\r\n    this.range.y.range = this.range.y.max - this.range.y.min;\r\n  }\r\n  if (params.volumeRange) {\r\n    this.range.v.min = params.volumeRange[0];\r\n    this.range.v.max = params.volumeRange[1];\r\n    this.range.v.range = this.range.v.max - this.range.v.min;\r\n  }\r\n  this.scaleVolume = 0.25;\r\n  this.candles = [];\r\n};\r\n\r\nGraph.prototype = {\r\n  normY: function(y) {\r\n    return (y - this.range.y.min) / (this.range.y.range);\r\n  },\r\n\r\n  normX: function(x) {\r\n    return (x - this.range.x.min) / (this.range.x.range);\r\n  },\r\n\r\n  normV: function(v) {\r\n    return (v - this.range.v.min) / (this.range.v.range);\r\n  },\r\n\r\n  drawCandle: function(ctx, candle) {\r\n    var O = (1 - this.normY(candle.O)) * ctx.canvas.height,\r\n        C = (1 - this.normY(candle.C)) * ctx.canvas.height,\r\n        H = (1 - this.normY(candle.H)) * ctx.canvas.height,\r\n        L = (1 - this.normY(candle.L)) * ctx.canvas.height,\r\n        T = this.normX(candle.T) * ctx.canvas.width,\r\n        W = (candle.width / this.range.x.range) * ctx.canvas.width,\r\n        V = (candle.V) ? (1 - this.normV(candle.V) * this.scaleVolume) * ctx.canvas.height : false;\r\n\r\n    if (O <= C) {\r\n      ctx.fillStyle = this.style.increase.fill;\r\n      ctx.strokeStyle = this.style.increase.stroke;\r\n    } else {\r\n      ctx.fillStyle = this.style.decrease.fill;\r\n      ctx.strokeStyle = this.style.decrease.stroke;\r\n    }\r\n\r\n    ctx.beginPath()\r\n    ctx.moveTo(T, H);\r\n    ctx.lineTo(T, L);\r\n    ctx.stroke();\r\n    ctx.fillRect(T - W/2, O, W, C - O);\r\n    ctx.strokeRect(T - W/2, O, W, C - O);\r\n\r\n    if (V) {\r\n      ctx.fillStyle = this.style.volume.fill;\r\n      ctx.strokeStyle = this.style.volume.stroke;\r\n      ctx.fillRect(T - W/2, V, W, ctx.canvas.height - V);\r\n      ctx.strokeRect(T - W/2, V, W, ctx.canvas.height - V);\r\n    }\r\n  },\r\n\r\n  draw: function(ctx, O, C, H, L, T, W, V) {\r\n\r\n  }\r\n};\r\n\r\nexport { Graph };\r\n","import { Graph } from './modules/graph';\n\nvar Candles = function(params) {\n  this.init((typeof params !== 'undefined') ? params : {});\n};\n\nCandles.prototype = {\n  init: function(params) {\n    // canvas setup\n    this.cvs = document.createElement('canvas');\n    this.ctx = this.cvs.getContext('2d');\n    this.element = (params.append) ? document.getElementById(params.append) : document.body;\n    this.cvs.width = params.width || 500;\n    this.cvs.height = params.height || 400;\n\n    // graph\n    this.graph = new Graph(params);\n\n    // append to document\n    this.element.appendChild(this.cvs);\n  },\n\n  test: function() {\n    var price = 50, volume = 50;\n\n    for (var i=0; i<102; i+=2) {\n      price += Math.random() * 4 - 2;\n      volume += Math.random() * 10 - 5;\n\n      this.graph.drawCandle(this.ctx, {\n          O: price + Math.random() * 10 - 5,\n          C: price + Math.random() * 10 - 5,\n          H: price + Math.random() * 10,\n          L: price - Math.random() * 10,\n          T: i,\n          V: volume,\n          width: 1.5\n      });\n    }\n  },\n\n  graphCandle: function(candle) {\n\n  },\n\n  graphCandleSet: function(set) {\n\n  },\n\n  autoGraph: function(set) {\n\n  }\n};\n"],"names":[],"mappings":"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"}